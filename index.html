<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Autodance Share Online</title>
<style>
@font-face {
    font-family: 'TungstenBold';
    src: url('tungsten bold.ttf') format('truetype'); /* Coloque o arquivo na mesma pasta */
}

body {
    font-family: Arial, sans-serif;
    background-color: #1a1a1a;
    color: #f0f0f0;
    margin: 0;
    padding: 0;
}

header {
    font-family: 'TungstenBold', Arial, sans-serif;
    background-color: #ff4d4d;
    padding: 1em;
    text-align: center;
    font-size: 2em;
}

main {
    max-width: 800px;
    margin: 2em auto;
    padding: 1em;
}

input, button {
    padding: 0.7em;
    margin-bottom: 1em;
    border-radius: 5px;
    border: none;
}

input[type="text"], input[type="url"] {
    width: 100%;
    margin-bottom: 0.5em;
}

button {
    background-color: #ff4d4d;
    color: #fff;
    cursor: pointer;
}

button:hover {
    background-color: #e04343;
}

.post {
    background-color: #333;
    padding: 1em;
    border-radius: 8px;
    margin-bottom: 1em;
}

.author {
    font-weight: bold;
    color: #ffbb33;
    margin-bottom: 0.5em;
}

video {
    max-width: 100%;
    border-radius: 5px;
}
</style>
</head>
<body>

<header>Autodance Share Online</header>

<main>
    <h2>Poste sua autodance</h2>
    <input type="text" id="author" placeholder="Seu nome">
    <input type="url" id="videoUrl" placeholder="Cole o link do vídeo (MP4) do Imgur/Streamable/etc.)">
    <button onclick="addPost()">Postar</button>

    <h2>Autodances enviadas</h2>
    <div id="posts"></div>
</main>

<script>
// Substitua pelo seu bin criado no JSONBin.io
const JSONBIN_URL = 'https://api.jsonbin.io/v3/b/YOUR_BIN_ID';
const JSONBIN_KEY = 'YOUR_JSONBIN_KEY';

// Carrega posts do bin
async function loadPosts() {
    const container = document.getElementById('posts');
    container.innerHTML = '';
    try {
        const res = await fetch(JSONBIN_URL, {
            headers: { 'X-Master-Key': JSONBIN_KEY }
        });
        const data = await res.json();
        const posts = data.record || [];
        posts.reverse().forEach(post => {
            const div = document.createElement('div');
            div.classList.add('post');
            div.innerHTML = `<div class="author">${post.author}:</div>
                             <video controls src="${post.video}"></video>`;
            container.appendChild(div);
        });
    } catch (e) {
        console.error('Erro ao carregar posts:', e);
    }
}

// Adiciona post
async function addPost() {
    const author = document.getElementById('author').value.trim() || 'Anônimo';
    const videoUrl = document.getElementById('videoUrl').value.trim();
    if (!videoUrl) {
        alert('Cole o link do vídeo!');
        return;
    }

    try {
        // Pega posts existentes
        const res = await fetch(JSONBIN_URL, { headers: { 'X-Master-Key': JSONBIN_KEY } });
        const data = await res.json();
        const posts = data.record || [];
        posts.push({ author, video: videoUrl });

        // Atualiza JSONBin
        await fetch(JSONBIN_URL, {
            method: 'PUT',
            headers: {
                'Content-Type': 'application/json',
                'X-Master-Key': JSONBIN_KEY
            },
            body: JSON.stringify(posts)
        });

        document.getElementById('author').value = '';
        document.getElementById('videoUrl').value = '';
        loadPosts();
    } catch (e) {
        console.error('Erro ao postar:', e);
        alert('Não foi possível postar. Confira o BIN ID e a Master Key.');
    }
}

// Inicializa
loadPosts();
</script>

</body>
</html>